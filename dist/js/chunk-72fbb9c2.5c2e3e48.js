(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72fbb9c2"],{"057f":function(t,e,n){var r=n("fc6a"),a=n("241c").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(t){try{return a(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?i(t):a(r(t))}},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("d3b7");function r(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(u){return void n(u)}i.done?e(c):Promise.resolve(c).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var s=t.apply(e,n);function i(t){r(s,a,o,i,c,"next",t)}function c(t){r(s,a,o,i,c,"throw",t)}i(void 0)}))}}},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");var r=n("ade3");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"746f":function(t,e,n){var r=n("428f"),a=n("5135"),o=n("e538"),s=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});a(e,t)||s(e,t,{value:o.f(t)})}},a4d3:function(t,e,n){"use strict";var r=n("23e7"),a=n("da84"),o=n("d066"),s=n("c430"),i=n("83ab"),c=n("4930"),u=n("fdbf"),l=n("d039"),f=n("5135"),d=n("e8b5"),v=n("861d"),p=n("825a"),b=n("7b0b"),m=n("fc6a"),g=n("c04e"),h=n("5c6c"),y=n("7c73"),_=n("df75"),w=n("241c"),k=n("057f"),O=n("7418"),j=n("06cf"),P=n("9bf2"),S=n("d1e7"),C=n("9112"),T=n("6eeb"),D=n("5692"),x=n("f772"),$=n("d012"),N=n("90e3"),E=n("b622"),R=n("e538"),z=n("746f"),F=n("d44e"),B=n("69f3"),J=n("b727").forEach,U=x("hidden"),A="Symbol",I="prototype",Q=E("toPrimitive"),W=B.set,Y=B.getterFor(A),q=Object[I],G=a.Symbol,H=o("JSON","stringify"),K=j.f,L=P.f,M=k.f,V=S.f,X=D("symbols"),Z=D("op-symbols"),tt=D("string-to-symbol-registry"),et=D("symbol-to-string-registry"),nt=D("wks"),rt=a.QObject,at=!rt||!rt[I]||!rt[I].findChild,ot=i&&l((function(){return 7!=y(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=K(q,e);r&&delete q[e],L(t,e,n),r&&t!==q&&L(q,e,r)}:L,st=function(t,e){var n=X[t]=y(G[I]);return W(n,{type:A,tag:t,description:e}),i||(n.description=e),n},it=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof G},ct=function(t,e,n){t===q&&ct(Z,e,n),p(t);var r=g(e,!0);return p(n),f(X,r)?(n.enumerable?(f(t,U)&&t[U][r]&&(t[U][r]=!1),n=y(n,{enumerable:h(0,!1)})):(f(t,U)||L(t,U,h(1,{})),t[U][r]=!0),ot(t,r,n)):L(t,r,n)},ut=function(t,e){p(t);var n=m(e),r=_(n).concat(pt(n));return J(r,(function(e){i&&!ft.call(n,e)||ct(t,e,n[e])})),t},lt=function(t,e){return void 0===e?y(t):ut(y(t),e)},ft=function(t){var e=g(t,!0),n=V.call(this,e);return!(this===q&&f(X,e)&&!f(Z,e))&&(!(n||!f(this,e)||!f(X,e)||f(this,U)&&this[U][e])||n)},dt=function(t,e){var n=m(t),r=g(e,!0);if(n!==q||!f(X,r)||f(Z,r)){var a=K(n,r);return!a||!f(X,r)||f(n,U)&&n[U][r]||(a.enumerable=!0),a}},vt=function(t){var e=M(m(t)),n=[];return J(e,(function(t){f(X,t)||f($,t)||n.push(t)})),n},pt=function(t){var e=t===q,n=M(e?Z:m(t)),r=[];return J(n,(function(t){!f(X,t)||e&&!f(q,t)||r.push(X[t])})),r};if(c||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=N(t),n=function(t){this===q&&n.call(Z,t),f(this,U)&&f(this[U],e)&&(this[U][e]=!1),ot(this,e,h(1,t))};return i&&at&&ot(q,e,{configurable:!0,set:n}),st(e,t)},T(G[I],"toString",(function(){return Y(this).tag})),T(G,"withoutSetter",(function(t){return st(N(t),t)})),S.f=ft,P.f=ct,j.f=dt,w.f=k.f=vt,O.f=pt,R.f=function(t){return st(E(t),t)},i&&(L(G[I],"description",{configurable:!0,get:function(){return Y(this).description}}),s||T(q,"propertyIsEnumerable",ft,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:G}),J(_(nt),(function(t){z(t)})),r({target:A,stat:!0,forced:!c},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var n=G(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!it(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){at=!0},useSimple:function(){at=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!i},{create:lt,defineProperty:ct,defineProperties:ut,getOwnPropertyDescriptor:dt}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:vt,getOwnPropertySymbols:pt}),r({target:"Object",stat:!0,forced:l((function(){O.f(1)}))},{getOwnPropertySymbols:function(t){return O.f(b(t))}}),H){var bt=!c||l((function(){var t=G();return"[null]"!=H([t])||"{}"!=H({a:t})||"{}"!=H(Object(t))}));r({target:"JSON",stat:!0,forced:bt},{stringify:function(t,e,n){var r,a=[t],o=1;while(arguments.length>o)a.push(arguments[o++]);if(r=e,(v(e)||void 0!==t)&&!it(t))return d(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!it(e))return e}),a[1]=e,H.apply(null,a)}})}G[I][Q]||C(G[I],Q,G[I].valueOf),F(G,A),$[U]=!0},b0c0:function(t,e,n){var r=n("83ab"),a=n("9bf2").f,o=Function.prototype,s=o.toString,i=/^\s*function ([^ (]*)/,c="name";r&&!(c in o)&&a(o,c,{configurable:!0,get:function(){try{return s.call(this).match(i)[1]}catch(t){return""}}})},b64b:function(t,e,n){var r=n("23e7"),a=n("7b0b"),o=n("df75"),s=n("d039"),i=s((function(){o(1)}));r({target:"Object",stat:!0,forced:i},{keys:function(t){return o(a(t))}})},b6f9:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"profile"}},[n("h1",[t._v("Планування")]),t.adminRules?n("section",{staticClass:"col-10"},[n("hr"),n("h4",[t._v("Створення плану")]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-3"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.create.assign,expression:"create.assign"}],staticClass:"form-select",attrs:{name:"assign",id:"assign"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.create,"assign",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"0"}},[t._v("Оберіть співробітника")]),t._l(t.userData,(function(e){return n("option",{key:e.user.bitrix_id,domProps:{value:e.user.bitrix_id}},[t._v(" "+t._s(e.user.midname+" "+e.user.name)+" ")])}))],2)]),n("div",{staticClass:"col-4"},[n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.create.date.from,expression:"create.date.from"}],staticClass:"form-control",attrs:{type:"date",placeholder:"Дата від",name:"date-from"},domProps:{value:t.create.date.from},on:{input:function(e){e.target.composing||t.$set(t.create.date,"from",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.create.date.due,expression:"create.date.due"}],staticClass:"form-control",attrs:{type:"date",placeholder:"Дата до",name:"date-to"},domProps:{value:t.create.date.due},on:{input:function(e){e.target.composing||t.$set(t.create.date,"due",e.target.value)}}})])]),n("div",{staticClass:"col-4"},[n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.create.task.brief,expression:"create.task.brief"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Кількість",name:"task-brief"},domProps:{value:t.create.task.brief},on:{input:function(e){e.target.composing||t.$set(t.create.task,"brief",e.target.value)}}}),n("select",{directives:[{name:"model",rawName:"v-model",value:t.create.task.type,expression:"create.task.type"}],staticClass:"form-select",attrs:{name:"task-type",id:"task-type"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.create.task,"type",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"0"}},[t._v("Оберіть тип задачі")]),t._l(t.task_type,(function(e){return n("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.title)+" ")])}))],2)])]),n("div",{staticClass:"col-1"},[n("button",{staticClass:"btn btn-primary",on:{click:t.savePlan}},[t._v("Зберегти")])])])]):t._e(),t.adminRules?n("section",{staticClass:"col-12"},[n("hr"),n("h4",[t._v("Задачі по співробітникам")]),n("table",{staticClass:"table"},[t._m(0),n("tbody",t._l(t.plan,(function(e,r){return n("tr",{key:r},[n("td",[t._v(t._s(r))]),n("td",[t._v(t._s(t.getUserBy(e.assign)))]),n("td",[t._v(t._s(t.getTaskType(e.task.type)))]),n("td",[t._v(t._s(e.task.brief))]),n("td",[t._v(" "+t._s(t.normalizeDate(e.date.from)+" - "+t.normalizeDate(e.date.due))+" ")]),n("td",[t._v(t._s(t.getStatusType(e.status)))]),n("td",[t._v("Дії")])])})),0)])]):t._e(),t.adminRules?t._e():n("section",{staticClass:"col-12"},[n("hr"),n("h4",[t._v("Мій план")]),n("table",{staticClass:"table"},[t._m(1),n("tbody",t._l(t.myPlan,(function(e,r){return n("tr",{key:r},[n("td",[t._v(t._s(r))]),n("td",[t._v(t._s(t.getTaskType(e.task.type)))]),n("td",[t._v(t._s(e.task.brief))]),n("td",[t._v(t._s(t.normalizeDate(e.date.from)+" - "+t.normalizeDate(e.date.due)))]),n("td",[t._v(t._s(t.getStatusType(e.status)))]),n("td",[n("div",{staticClass:"btn-group"},[n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(n){return t.sendTaskStatus("not_done",e._id)}}},[t._v("Не виконано")]),n("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(n){return t.sendTaskStatus("in_work",e._id)}}},[t._v("В роботі")]),n("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(n){return t.sendTaskStatus("closed",e._id)}}},[t._v("Виконано")])])])])})),0)])])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("#")]),n("th",[t._v("Партнер")]),n("th",[t._v("Тип задачі")]),n("th",[t._v("Кількість")]),n("th",[t._v("Срок виконання")]),n("th",[t._v("Статус")]),n("th",[t._v("Дії")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("td",[t._v("#")]),n("td",[t._v("Тип задачі")]),n("td",[t._v("Кількість")]),n("td",[t._v("Дата")]),n("td",[t._v("Статус")]),n("td",[t._v("Дії")])])])}],o=n("1da1"),s=n("5530"),i=(n("96cf"),n("4de4"),n("99af"),n("b0c0"),n("2f62")),c={data:function(){return{task_type:[{value:1,title:"Генерація лідів"},{value:2,title:"Укладення угод"},{value:3,title:"Позитивно завершені угоди"},{value:4,title:"Абонентське обслуговування"}],create:{assign:0,date:{from:0,due:0},task:{type:0,brief:""}}}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(i["b"])(["userData"])),Object(i["c"])(["account","plan","myPlan"])),{},{adminRules:function(){return 1==this.account.data.user.assignTo}}),methods:{sendTaskStatus:function(t,e){var n=this,r={url:"plan/task/".concat(e),method:"patch",data:{status:t}};this.$http(r).then((function(t){console.log(t.data),n.$store.dispatch("getTasksByUser",n.account.data.user.assignTo)}))},getStatusType:function(t){var e="";return"awaits"==t&&(e="Очікує підтвердження"),"in_work"==t&&(e="В роботі"),"closed"==t&&(e="Завершено"),"not_done"==t&&(e="Не виконано"),e},getTaskType:function(t){return this.task_type.filter((function(e){return e.value===t}))[0].title},getUserBy:function(t){var e=this.$store.state.users,n=e.filter((function(e){return e.bitrix_id===t}))[0];return"".concat(n.midname," ").concat(n.name)},normalizeDate:function(t){var e=new Intl.DateTimeFormat("ua",{month:"long"}),n=new Date(t).getDay(),r=e.format(new Date(t)),a=new Date(t).getFullYear();return"".concat(n," ").concat(r," ").concat(a)},savePlan:function(){var t=this,e={url:"plan",method:"post",data:this.create};this.$http(e).then((function(e){console.log(e),alert("План збережено"),t.$store.dispatch("getTasks")}))}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.adminRules){e.next=5;break}return e.next=3,t.$store.dispatch("getTasks");case 3:e.next=6;break;case 5:t.adminRules||t.$store.dispatch("getTasksByUser",t.account.data.user.assignTo);case 6:case"end":return e.stop()}}),e)})))()}},u=c,l=n("2877"),f=Object(l["a"])(u,r,a,!1,null,null,null);e["default"]=f.exports},dbb4:function(t,e,n){var r=n("23e7"),a=n("83ab"),o=n("56ef"),s=n("fc6a"),i=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,n,r=s(t),a=i.f,u=o(r),l={},f=0;while(u.length>f)n=a(r,e=u[f++]),void 0!==n&&c(l,e,n);return l}})},e439:function(t,e,n){var r=n("23e7"),a=n("d039"),o=n("fc6a"),s=n("06cf").f,i=n("83ab"),c=a((function(){s(1)})),u=!i||c;r({target:"Object",stat:!0,forced:u,sham:!i},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},e538:function(t,e,n){var r=n("b622");e.f=r}}]);
//# sourceMappingURL=chunk-72fbb9c2.5c2e3e48.js.map